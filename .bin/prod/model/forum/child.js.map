{"version":3,"sources":["../../../../server/model/forum/child.js"],"names":["StringLib","Schema","mongoose","Childs","category","type","Types","ObjectId","ref","title","String","mod","vip","Boolean","default","link","Case","toJSON","virtuals","virtual","localField","foreignField","count","module","exports"],"mappings":";;AAAA;;;;AACA;;IAAYA,S;;;;;;AAEZ,MAAMC,SAASC,mBAASD,MAAxB;AACA,MAAME,SAAS,IAAIF,MAAJ,CAAW;AACtBG,cAAU,EAAEC,MAAMJ,OAAOK,KAAP,CAAaC,QAArB,EAA+BC,KAAK,gBAApC,EADY;AAEtBC,WAAO,EAAEJ,MAAMK,MAAR,EAFe;AAGtBC,SAAK,CACD,EAACN,MAAMJ,OAAOK,KAAP,CAAaC,QAApB,EAA8BC,KAAK,OAAnC,EADC,CAHiB;AAMtBI,SAAK,EAAEP,MAAMQ,OAAR,EAAiBC,SAAS,KAA1B,EANiB;AAOtBC,UAAM,EAAEV,MAAMK,MAAR,EAAiBI,SAAS,YAAU;AACtC,gBAAG,KAAKL,KAAR,EAAe,OAAOT,UAAUgB,IAAV,CAAe,KAAKP,KAApB,EAA2B,GAA3B,CAAP;AACf,mBAAO,IAAP;AACH,SAHK;AAPgB,CAAX,EAWZ,EAAEQ,QAAQ,EAAEC,UAAU,IAAZ,EAAV,EAXY,CAAf;;AAaA;AACAf,OAAOgB,OAAP,CAAe,QAAf,EAAyB;AACrBX,SAAK,aADgB;AAErBY,gBAAY,KAFS;AAGrBC,kBAAc;AAHO,CAAzB;;AAMAlB,OAAOgB,OAAP,CAAe,WAAf,EAA4B;AACxBX,SAAK,aADmB;AAExBY,gBAAY,KAFY;AAGxBC,kBAAc,OAHU;AAIxBC,WAAO;AAJiB,CAA5B;;AAOAC,OAAOC,OAAP,GAAiBrB,MAAjB","file":"child.js","sourcesContent":["import mongoose from 'mongoose';\r\nimport * as StringLib from '../../plugins/stringcase' ;\r\n\r\nconst Schema = mongoose.Schema;\r\nconst Childs = new Schema({\r\n    category: { type: Schema.Types.ObjectId, ref: 'ForumCategorys' },\r\n    title: { type: String },\r\n    mod: [\r\n        {type: Schema.Types.ObjectId, ref: 'Users'}\r\n    ],\r\n    vip: { type: Boolean, default: false },\r\n    link: { type: String , default: function(){\r\n        if(this.title) return StringLib.Case(this.title, '-');\r\n        return null;\r\n    }},\r\n}, { toJSON: { virtuals: true } });\r\n\r\n//Virtual\r\nChilds.virtual('topics', {\r\n    ref: 'ForumTopics',\r\n    localField: '_id',\r\n    foreignField: 'child',\r\n});\r\n\r\nChilds.virtual('numTopics', {\r\n    ref: 'ForumTopics',\r\n    localField: '_id',\r\n    foreignField: 'child',\r\n    count: true\r\n});\r\n\r\nmodule.exports = Childs;"]}